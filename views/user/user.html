{{extend 'layouts/basic.html'}}


<div class="modal">
    <div class="block">
        <div class="navbar navbar-inner block-header">
            <div class="muted pull-left" style="padding-top:0px;">
                <h4>{{=T( request.args(0).replace('_',' ').capitalize() )}}</h4>
            </div>
        </div>
        <div class="block-content collapse in">
            <div class="container-fluid">

    
                <div class="row-fluid" id="login_form">
                {{if request.args(0)=='login':}}
                    {{=form.custom.begin}}
                    <div class="control-group">
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-user"></i></span>
                                {{ form.elements('#auth_user_username')[0] ['_placeholder'] = T('Username') }}
                                {{ form.elements('#auth_user_username')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.username}}
                            </div>
                        </div>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-eye-open"></i></span>
                                {{ form.elements('#auth_user_password')[0] ['_placeholder'] = T('Password') }}
                                {{ form.elements('#auth_user_password')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.password}}
                            </div>
                        </div>
                        <div class="controls">
                            <label for="auth_user_remember">
                                <input class="checkbox" id="auth_user_remember" name="remember" type="checkbox" value="on">&nbsp;&nbsp;
                                {{=T('remember me (for 30 days)')}}
                            </label>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <input type="submit" class="btn btn-success" value="{{= T('Enter')}}"/>
                        <div class="right">
                            <a id="reset_password" href="{{=URL(c='user', f='user',args='request_reset_password')}}">{{=T('Forgot Password?')}}</a>
                        </div>
                    </div>   
                    {{=form.custom.end}}    


                {{elif request.args(0)=='request_reset_password':}}
                    {{=form.custom.begin}}
                    <div class="control-group">
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-user"></i></span>
                                {{ form.elements('#auth_user_username')[0] ['_placeholder'] = T('Username') }}
                                {{ form.elements('#auth_user_username')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.username}}
                            </div>
                        </div>
                        <div class="controls">
                            <input type="submit" class="btn btn-success" value="{{= T('Request Reset Password')}}"/>
                            <a href="{{= URL(c='default', f='index')}}" class="btn">{{= T('Cancel')}}</a>
                        </div>
                    </div>
                    {{=form.custom.end}}        

                                
                {{elif request.args(0)=='retrieve_username':}}
                    {{=form.custom.begin}}
                    <div class="control-group">
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-envelope"></i></span>
                                {{ form.elements('#auth_user_email')[0] ['_placeholder'] = "Email" }}
                                {{ form.elements('#auth_user_email')[0] ['_type'] = "email" }}
                                {{ form.elements('#auth_user_email')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.email}}
                            </div>
                        </div>
                        <div class="controls">
                            <input type="submit" class="btn btn-success" value="{{= ('Request')}}"/>
                            <a href="{{= URL(c='default', f='index')}}" class="btn">{{= T('Cancel')}}</a>
                        </div>
                    </div>
                    {{=form.custom.end}}


                {{elif request.args(0)=='change_password':}}
                    {{=form.custom.begin}}
                    <div class="control-group">
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-eye-open"></i></span>
                                {{ form.elements('#no_table_old_password')[0] ['_placeholder'] = T('Old Password') }}
                                {{ form.elements('#no_table_old_password')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.old_password}}
                            </div>
                        </div>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-pencil"></i></span>
                                {{ form.elements('#no_table_new_password')[0] ['_placeholder'] = T('New Password') }}
                                {{ form.elements('#no_table_new_password')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.new_password}}
                            </div>
                        </div>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-ok"></i></span>
                                {{ form.elements('#no_table_new_password2')[0] ['_placeholder'] = T('Confirm Password') }}
                                {{ form.elements('#no_table_new_password2')[0] ['_style'] = "width:100%;" }}
                                {{=form.custom.widget.new_password2}}
                            </div>
                        </div>
                        <div class="controls">
                            <input type="submit" class="btn btn-success" value="{{= ('Change Password')}}"/>
                            <a href="{{= URL(c='default', f='index')}}" class="btn">{{= T('Cancel')}}</a>
                        </div>
                    </div>
                    {{=form.custom.end}}
                                
                {{else:}}
                    {{= form}}
                {{pass}}
            </div>
        </div>
    </div>
</div>
</div>


<script language="javascript"><!--
jQuery("input:visible:enabled:first").focus();
{{if request.args(0)=='register':}}
    web2py_validate_entropy(jQuery('#auth_user_password'),100);
{{elif request.args(0)=='change_password':}}
    web2py_validate_entropy(jQuery('#no_table_new_password'),100);
{{pass}}
//--></script>
